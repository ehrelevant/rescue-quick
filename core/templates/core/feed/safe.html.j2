{% extends "core/base.html.j2" %}
{% load static %}
{% block header %}
    {% include 'core/nav.html.j2' with selected='feed' %}
{% endblock %}
{% block content %}
    <div hx-get="/feed/{{ pair_id }}/"
         hx-trigger="every 5s"
         id="feed"
         hx-select="#feed"
         hx-swap="morph:outerHTML"
         class="h-[calc(100vh-64px)] lg:h-[90vh] pt-2 p-3 lg:p-6 lg:pl-[5%] lg:pr-[5%]">
        <div class="overflow-y-auto lg:overflow-y-none lg:h-full w-full flex flex-col">
            <div class="bg-white h-[90%] grid grid-cols-10 gap-4 mb-4">
                {# Container for the image #}
                <div class="aspect-3/2 lg:aspect-auto col-span-10 lg:col-span-7 flex-shrink lg:flex-grow w-full bg-[#F2F4F8] flex items-center justify-center overflow-y-hidden">
                    <img class="h-full object-contain" src="{{ processed_image }}">
                </div>
                {# Container for camera data #}
                <div class="col-span-10 lg:col-span-3 h-full flex flex-col overflow-y-hidden">
                    {# 'Go Home' button #}
                    <span class="hidden lg:block">
                        <a href="/"
                           class="flex items-center gap-3 flex-row mb-4 hover:opacity-50">
                            <svg xmlns="http://www.w3.org/2000/svg" class="size-4" viewBox="0 0 48 48">
                                <g fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="4">
                                <path d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                                <path stroke-linecap="round" d="m27 33l-9-9l9-9" />
                                </g>
                            </svg>
                            <span class="font-medium">Back to Dashboard</span>
                        </a>
                    </span>
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        {# Location #}
                        <div class="col-span-2 p-4 bg-green-light rounded rounded-md">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="p-1 bg-green rounded-full flex items-center aspect-square h-fit w-auto justify-center">
                                    <span class="carbon--location-fill size-3"></span>
                                </div>
                                <span class="font-bold">Location</span>
                            </div>
                            <span class="lg:text-xl font-bold">{{ location }}</span>
                        </div>
                        {# Action buttons #}
                        <div class="col-span-2 tooltip tooltip-bottom grid grid-cols-2 gap-2"
                             data-tip="Currently not in critical level">
                            <button class="btn btn-disabled hover:shadow-md w-full">Signal Rescue</button>
                            <button class="btn btn-disabled hover:shadow-md w-full">Mark as Safe</button>
                        </div>
                    </div>
                    {# Logs section #}
                    {# Logs Section -- Larger Views #}
                    <div class="hidden lg:block">
                        <span class="text-lg font-bold mb-2">Logs</span>
                        <div class="overflow-y-auto flex-grow flex flex-col gap-1">
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                        </div>
                    </div>
                    {# Logs Section -- Smaller Views #}
                    <button class="lg:hidden btn" onclick="my_modal_2.showModal()">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="24"
                             height="24"
                             class="size-5"
                             viewBox="0 0 24 24">
                            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1m1-8h-2V7h2z" />
                        </svg>
                        Check Logs
                    </button>
                    <dialog id="my_modal_2" class="modal">
                        <div class="modal-box max-h-[50vh]">
                            <span class="text-lg font-bold mb-2">Logs</span>
                            <div class="overflow-y-auto flex-grow flex flex-col gap-1">
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                                {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            </div>
                        </div>
                        <form method="dialog" class="modal-backdrop">
                            <button>Close</button>
                        </form>
                    </dialog>
                    <div></div>
                </div>
            </div>
            <div class="flex-grow"></div>
            {# Monitor Info #}
            <div class="flex items-end justify-center mb-4 lg:mb-[0]">
                <div class="flex items-center gap-4">
                    <a href="/feed/{{ prev }}/" class="hover:opacity-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 48 48">
                            <defs><mask id="ipSLeftC0">
                            <g fill="none" stroke-linejoin="round" stroke-width="4">
                            <path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                            <path stroke="#000" stroke-linecap="round" d="m27 33l-9-9l9-9" />
                            </g>
                            </mask></defs>
                            <path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipSLeftC0)" />
                        </svg>
                    </a>
                    <span class="p-2 pl-6 pr-6 text-gray font-medium bg-gray-light border-1 border-gray-200 rounded-md">{{ camera_name }}</span>
                    <a href="/feed/{{ next }}/" class="hover:opacity-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 48 48">
                            <defs><mask id="ipSRightC0">
                            <g fill="none" stroke-linejoin="round" stroke-width="4">
                            <path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                            <path stroke="#000" stroke-linecap="round" d="m21 33l9-9l-9-9" />
                            </g>
                            </mask></defs>
                            <path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipSRightC0)" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block footer %}
    {% include 'core/nav_footer.html.j2' %}
{% endblock %}
