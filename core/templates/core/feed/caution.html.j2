{% extends "core/base.html.j2" %}
{% load static %}
{% block header %}
    {% include 'core/nav.html.j2' with selected='feed' %}
{% endblock %}
{% block content %}
    <div class="h-[90vh] pt-2 p-3 lg:p-6 lg:pl-[5%] lg:pr-[5%]">
        <div class="h-full w-full flex flex-col">
            <div class="bg-white h-[90%] grid grid-cols-10 gap-4 mb-4">
                {# Container for the image #}
                <div class="aspect-3/2 lg:aspect-auto col-span-10 lg:col-span-7 flex-shrink lg:flex-grow w-full bg-[#F2F4F8] flex items-center justify-center overflow-y-hidden">
                    <span class="loading loading-dots loading-lg"></span>
                </div>
                {# Container for camera data #}
                <div class="col-span-10 lg:col-span-3 h-full flex flex-col overflow-y-hidden">
                    {# 'Go Home' button #}
                    <a href="/"
                       class="hidden lg:inline flex items-center gap-3 flex-row mb-4 hover:opacity-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-4" viewBox="0 0 48 48">
                            <g fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="4">
                            <path d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                            <path stroke-linecap="round" d="m27 33l-9-9l9-9" />
                            </g>
                        </svg>
                        <span class="font-medium">Back to Dashboard</span>
                    </a>
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        {# Detected entities #}
                        <div class="p-4 bg-yellow-light rounded rounded-md">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="p-1 bg-yellow rounded-full flex items-center aspect-square h-fit w-auto justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         viewBox="0 0 24 24"
                                         fill="white"
                                         class="size-3">
                                        <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <span class="font-bold">People & Pets</span>
                            </div>
                            <div class="flex flex-col">
                                <div class="flex items-end">
                                    <span class="font-medium text-gray-500">People</span>
                                    <div class="flex-grow"></div>
                                    <span class="font-bold text-gray-300">{{ num_people }}</span>
                                </div>
                                <div class="flex items-end">
                                    <span class="font-medium text-gray-500">Pets</span>
                                    <div class="flex-grow font-medium"></div>
                                    <span class="font-bold text-gray-300">{{ num_pets }}</span>
                                </div>
                            </div>
                        </div>
                        {# Flood level #}
                        <div class="p-4 bg-yellow-light rounded rounded-md">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="p-1 bg-yellow rounded-full flex items-center aspect-square h-fit w-auto justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-3" viewBox="0 0 48 48">
                                        <g fill="none" stroke="white" stroke-linejoin="round" stroke-width="4">
                                        <path stroke-linecap="round" d="M24 44c8.284 0 15-6.716 15-15C39 15 24 4 24 4S9 15 9 29c0 8.284 6.716 15 15 15" clip-rule="evenodd" />
                                        <path fill="white" d="M9 29c0 8.284 6.716 15 15 15s15-6.716 15-15c0 0-9 3-15 0S9 29 9 29Z" />
                                        </g>
                                    </svg>
                                </div>
                                <span class="font-bold">Flood Level</span>
                            </div>
                            <div class="flex flex-col gap-2">
                                <div class="flex items-end gap-2">
                                    <span class="font-bold">{{ flood_level }}</span>
                                    <span class="font-medium text-gray-500">Meters</span>
                                </div>
                                <div class="tooltip tooltip-bottom"
                                     data-tip="Caution Level: {{ max_flood_level }} meters">
                                    <progress class="progress progress-error w-full"
                                              value="{{ flood_level }}"
                                              max="{{ max_flood_level }}"
                                              style="color: var(--color-yellow)"></progress>
                                </div>
                            </div>
                        </div>
                        {# Location #}
                        <div class="col-span-2 p-4 bg-yellow-light rounded rounded-md">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="p-1 bg-yellow rounded-full flex items-center aspect-square h-fit w-auto justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="size-3" viewBox="0 0 16 16">
                                        <path fill="#fff" d="M9.156 14.544C10.899 13.01 14 9.876 14 7A6 6 0 0 0 2 7c0 2.876 3.1 6.01 4.844 7.544a1.736 1.736 0 0 0 2.312 0M6 7a2 2 0 1 1 4 0a2 2 0 0 1-4 0" />
                                    </svg>
                                </div>
                                <span class="font-bold">Location</span>
                            </div>
                            <span class="lg:text-xl font-bold">{{ location }}</span>
                        </div>
                        {# Action buttons #}
                        <div class="col-span-2 tooltip tooltip-bottom grid grid-cols-2 gap-2"
                             data-tip="Currently not in critical level">
                            <button class="btn btn-disabled hover:shadow-md w-full">Signal Rescue</button>
                            <button class="btn btn-disabled hover:shadow-md w-full">Mark as Safe</button>
                        </div>
                    </div>
                    {# Logs Section -- Larger Views #}
                    <div class="hidden lg:block">
                        <span class="text-lg font-bold mb-2">Logs</span>
                        <div class="overflow-y-auto flex-grow flex flex-col gap-1">
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                        </div>
                    </div>
                    {# Logs Section -- Smaller Views #}
                    <button class="lg:hidden btn" onclick="my_modal_2.showModal()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="size-5" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1m1-8h-2V7h2z"/></svg>
                        Check Logs
                    </button>
                    <dialog id="my_modal_2" class="modal">
                    <div class="modal-box max-h-[50vh]">
                        <span class="text-lg font-bold mb-2">Logs</span>
                        <div class="overflow-y-auto flex-grow flex flex-col gap-1">
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_detect.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                            {% include 'core/components/log_flood.html.j2' with message="Message Here" date="April 20, 2025" time="10:00 AM" %}
                        </div>
                    </div>
                    <form method="dialog" class="modal-backdrop">
                        <button>Close</button>
                    </form>
                    </dialog>
                    <div></div>
                </div>
            </div>
            <div class="flex-grow"></div>
            {# Monitor Info #}
            <div class="flex items-end justify-center mb-4 lg:mb-[0]">
                <div class="flex items-center gap-4">
                    <a href="/feed/{{ prev }}/" class="hover:opacity-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 48 48">
                            <defs><mask id="ipSLeftC0">
                            <g fill="none" stroke-linejoin="round" stroke-width="4">
                            <path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                            <path stroke="#000" stroke-linecap="round" d="m27 33l-9-9l9-9" />
                            </g>
                            </mask></defs>
                            <path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipSLeftC0)" />
                        </svg>
                    </a>
                    <span class="p-2 pl-6 pr-6 text-gray font-medium bg-gray-light border-1 border-gray-200 rounded-md">{{ camera_name }}</span>
                    <a href="/feed/{{ next }}/" class="hover:opacity-50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 48 48">
                            <defs><mask id="ipSRightC0">
                            <g fill="none" stroke-linejoin="round" stroke-width="4">
                            <path fill="#fff" stroke="#fff" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z" />
                            <path stroke="#000" stroke-linecap="round" d="m21 33l9-9l-9-9" />
                            </g>
                            </mask></defs>
                            <path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipSRightC0)" />
                        </svg>
                    </a>
                </div>
            </div>
            <div class="flex-grow"></div>
            {% include 'core/nav_footer.html.j2' %}
        </div>
    </div>
{% endblock %}
